(this["webpackJsonpsc-coding-challenge"]=this["webpackJsonpsc-coding-challenge"]||[]).push([[0],{112:function(e,t,a){e.exports=a(153)},117:function(e,t,a){},123:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),s=a.n(c),o=(a(117),a(19)),i=a(7),u=a.n(i),l=a(10),p=Object.freeze({INITIAL:"FETCH_TOPICS_INITIAL",SUCCESS:"FETCH_TOPICS_SUCCESS",FAILURE:"FETCH_TOPICS_FAILURE"}),m=Object.freeze({INITIAL:"FETCH_POSTS_INITIAL",SUCCESS:"FETCH_POSTS_SUCCESS",FAILURE:"FETCH_POSTS_FAILURE"}),E=Object.freeze({SET_ERROR:"APP_SET_ERROR",SET_SHOWING_POSTS:"APP_SET_SHOWING_POSTS",SET_CURRENT_TOPIC:"APP_SET_CURRENT_TOPIC"});function d(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function f(e){return d("https://www.reddit.com/r/".concat(e,"/hot.json"))}function v(e,t){return t=t.data.children.map((function(e){return e.data})),{type:m.SUCCESS,topic:e,data:t}}function S(e){var t=e.data.children.map((function(e){return e.data}));return{type:p.SUCCESS,topics:t}}function b(e){return{type:E.SET_SHOWING_POSTS,isShowingPosts:e}}function O(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:m.INITIAL}),t.prev=1,t.next=4,f(e);case 4:r=t.sent,a(v(e,r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a((n=t.t0,{type:m.FAILURE,err:n}));case 11:case"end":return t.stop()}var n}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}var T=a(41),I=a(42),_=a(50),g=a(43),C=a(51),N=a(155),w=a(12),y=a(18),j=(a(123),function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(_.a)(this,Object(g.a)(t).call(this,e))).state={hasError:!1},a}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentDidCatch",value:function(e,t){var a;this.props.dispatch((a={error:e,errorInfo:t},{type:E.SET_ERROR,err:a}))}},{key:"render",value:function(){return this.state.hasError||this.props.hasError?n.a.createElement("main",{className:"error-boundary"},n.a.createElement("div",{className:"message"},n.a.createElement(N.a,{icon:y.a.ERROR,intent:w.a.DANGER}),n.a.createElement("h1",null,"Sorry, something went wrong."),n.a.createElement("h2",null,"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.a.Component));a(149);function P(e){var t=e.data,a=e.dispatch,r=t.display_name_prefixed,c=t.title,s=t.display_name;var o=function(e){var t=e.icon_img;if(t){var a={backgroundImage:"url(".concat(t,")")};return n.a.createElement("div",{className:"topic-icon",style:a})}return null}(t),i=function(e){var t=e.banner_background_image,a=e.banner_background_color,r=e.header_img,c={};return r?(c.backgroundImage="url(".concat(r,")"),c.backgroundSize="contain"):t&&(c.backgroundImage="url(".concat(t,")"),c.backgroundSize="cover"),a&&(c.backgroundColor=a),n.a.createElement("div",{className:"banner",style:c})}(t);return n.a.createElement("div",{className:"topic",onClick:function(){var e;a((e=s,{type:E.SET_CURRENT_TOPIC,topic:e})),a(b(!0))}},i,n.a.createElement("div",{className:"description"},n.a.createElement("div",{className:"title"},c),n.a.createElement("div",{className:"author"},o,n.a.createElement("div",{className:"display-name-prefixed"},r))))}var R=function(e){var t=e.topics,a=e.dispatch,r=t.map((function(e){return n.a.createElement(P,{data:e,key:e.name,dispatch:a})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Popular Topics"),n.a.createElement("div",{className:"topics"},r))},k=a(30);function U(e){return e.length?e.slice(0,1).toUpperCase()+e.slice(1):e}a(150);function A(e){var t=e.data,a=t.title,r=t.url,c=t.created,s=t.author,o=t.ups,i=function(e,t){var a,r=[[60,"second"],[3600,"minute"],[86400,"hour"],[604800,"day"],[2592e3,"week"],[31557600,"month"]],n=Math.abs(e-t)/1e3+1,c=r.map((function(e,t){return{entry:e,i:t}})).filter((function(e){var t=Object(k.a)(e.entry,2),a=t[0];t[1];return n<a})),s=n;if(c.length){var o=c.shift(),i=Object(k.a)(o.entry,2),u=(i[0],i[1]),l=o.i;a=u,l>0&&(s=n/r[l-1][0])}else s=n/31557600,a="year";return s=Math.floor(s),"".concat(s," ").concat(a).concat(s>1?"s":"")}(1e3*c,+new Date);var u=function(e){var t=e.thumbnail;return t&&RegExp("http*","gi").test(t)?n.a.createElement("div",{className:"thumbnail",style:{backgroundImage:"url(".concat(t,")")}}):null}(t);return n.a.createElement("a",{href:r,target:"_blank"},n.a.createElement("div",{className:"post"},u,n.a.createElement("div",{className:"text"},n.a.createElement("h1",{className:"title"},a),n.a.createElement("div",{className:"user-metadata"},"Posted by ".concat(s," ").concat(i," ago")),n.a.createElement("div",{className:"ups"},n.a.createElement(N.a,{icon:y.a.THUMBS_UP}),n.a.createElement("div",{className:"amount"},o.toLocaleString()||0)))))}var x=function(e){var t=e.posts,a=e.topic,r=e.dispatch;window.scrollTo(0,0);var c=t.map((function(e){return n.a.createElement(A,{data:e})})),s=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(b(!1));case 2:window.scrollTo(0,0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,a.split("_").map(U).join(" ").trim()),n.a.createElement("div",{className:"posts"},n.a.createElement("nav",null,n.a.createElement("span",{className:"back-icon",onClick:s},n.a.createElement(N.a,{icon:y.a.CHEVRON_LEFT}))),c))};a(151);var F=Object(o.b)((function(e){return{appState:e.app}}))((function(e){var t=e.appState,a=e.dispatch,c=t.hasError,s=t.topics,o=t.currentTopic,i=t.isShowingPosts,m=t.posts;return Object(r.useEffect)((function(){a(function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p.INITIAL}),e.prev=1,e.next=4,d("https://www.reddit.com/subreddits/popular.json?raw_json=1");case 4:a=e.sent,t(S(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:p.FAILURE,err:r}));case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.has(o)){e.next=3;break}return e.next=3,a(O(o));case 3:window.scrollTo(0,0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[o]),n.a.createElement(j,{hasError:c,dispatch:a},n.a.createElement("main",{className:"app"},i&&o&&m.has(o)?n.a.createElement(x,{posts:m.get(o),topic:o,dispatch:a}):n.a.createElement(R,{topics:s,dispatch:a})))})),L=a(15),H=a(47),z=a.n(H),D=a(48),G=a(13),M=a(49),W={topics:[],posts:new Map,isShowingPosts:!1,currentTopic:null,inProgress:!1,error:null,hasError:!1};function B(e,t,a){var r=Object(M.cloneDeep)(e);return r.set(t,a),r}var J=Object(L.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=e.posts;switch(t.type){case m.INITIAL:case p.INITIAL:return Object(G.a)({},e,{error:null,inProgress:!0,hasError:!1});case m.SUCCESS:return Object(G.a)({},e,{inProgress:!1,posts:B(a,t.topic,t.data)});case p.SUCCESS:return Object(G.a)({},e,{inProgress:!1,topics:t.topics});case m.FAILURE:case p.FAILURE:return Object(G.a)({},e,{inProgress:!1,error:t.err,hasError:!0});case E.SET_ERROR:return Object(G.a)({},e,{hasError:!0,error:t.err});case E.SET_SHOWING_POSTS:return Object(G.a)({},e,{isShowingPosts:t.isShowingPosts});case E.SET_CURRENT_TOPIC:return Object(G.a)({},e,{currentTopic:t.topic});default:return e}}}),V=Object(L.a)(z.a,D.a),q=Object(L.d)(J,V);s.a.render(n.a.createElement(o.a,{store:q},n.a.createElement(F,null)),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.1fcbf87f.chunk.js.map